#!/bin/bash

SCRIPT_DIR="$(dirname "$0")"
EXITCODE=0

if ! "$SCRIPT_DIR"/jslint/check-all; then
    EXITCODE=1;
fi

cd "$SCRIPT_DIR"/..;

if git ls-files | grep py$ | grep -v ^confirmation/ \
    | grep -v humbug/test_settings.py \
    | xargs pyflakes \
    | grep -v 'imported but unused'; then

    EXITCODE=1;
fi

exit $EXITCODE
